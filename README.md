# Проект Сбор тендеров

Этот проект описывает процесс сбора информации о тендерах с веб-сайта и сохранения этих данных в базе данных SQLite. Также предоставляется возможность взаимодействовать с этой базой данных через командную строку или веб-интерфейс с использованием FastAPI.

## Основные компоненты проекта

### 1. parse_tenders.py

Этот файл содержит скрипт для парсинга тендеров и их сохранения в базу данных:

- Импортируемые библиотеки:
  - requests для выполнения HTTP-запросов.
  - BeautifulSoup для парсинга HTML-страниц.
  - sqlite3 для работы с базой данных SQLite.

- Функция parse_tenders:
  - Создает таблицу tenders в базе данных (если она не существует).
  - Удаляет все существующие записи в таблице перед началом парсинга.
  - Цикл while используется для перехода через страницы с тендерами до достижения максимального количества тендеров (MAX_TENDERS).
  - Для каждого тендера извлекаются и сохраняются следующие данные:
    - Номер тендера.
    - Название.
    - Адрес доставки.
    - Начальная цена.
    - Категории заказчиков.
    - Ссылка на тендер.

### 2. tender_cli.py

Этот скрипт предоставляет интерфейс командной строки для взаимодействия с базой данных:

- Импортируемые библиотеки:
  - argparse для обработки аргументов командной строки.
  - sqlite3 для работы с базой данных SQLite.

- Функция main:
  - Определяет аргумент командной строки --limit для лимитирования количества выводимых тендеров.
  - Получает данные из базы данных и выводит их в формате таблицы.
  - Ограничивает длину выводимых данных с помощью срезов.

### 3. main.py

Этот файл используется для создания веб-сервиса на базе FastAPI для доступа к данным тендеров через HTTP-запросы:

- Импортируемые библиотеки:
  - FastAPI для создания веб-приложений.
  - sqlite3 для работы с базой данных SQLite.
  - parse_tenders импортируется для запуска функции парсинга.

- Главная логика:
  - Веб-сервис запускается на событии старта программы и вызывает функцию parse_tenders.
  - Создается GET-эндпоинт /tenders, который возвращает список тендеров из базы данных, принимая параметр limit для ограничения количества возвращаемых записей.

## Установка и использование
Склонируйте репозиторий:

### Требования

- Установите зависимости проекта:
  
    pip install -r requirements.txt
  

### Запуск парсинга

Перейдите в директорию с проектом:
    
    cd parser_tenders

Для запуска процесса парсинга:

    python parse_tenders.py


### Использование через командную строку

Для просмотра тендеров в командной строке:

python tender_cli.py --limit 10


### Запуск веб-сервиса

Для запуска FastAPI сервера:

uvicorn main:app --reload


После этого, вы сможете обратиться к веб-сервису по адресу http://127.0.0.1:8000/tenders.

## Примечания

- Убедитесь, что структура HTML, используемая в parse_tenders.py, остается актуальной, так как изменения на веб-сайте могут повлиять на корректность парсинга.